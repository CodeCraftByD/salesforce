<apex:component access="global">
    
    <apex:attribute name="oppId" type="Id" description="Id of the Opportunity" />
    <apex:attribute name="lmProdSelection" type="String" description=""/>
    <apex:attribute name="fontSize" type="String" description="" default="12px" />
    <apex:attribute name="tableHeader" type="String" description="" default="ORDER SUMMARY" />
    <apex:attribute name="isPromoTranslated" type="Boolean" description="" default="TRUE" />
    <apex:attribute name="isNewPromoLangTranslated" type="Boolean" description="" default="FALSE"  />
    <apex:attribute name="objWrapper" Type="List" description="stores the related contact id" />
    <table style="border-spacing: 0px 5px; width:100%; font-size:{!fontSize};margin-left: auto;margin-right: auto; color: black;">        
        
        <apex:variable var="monthlySub" value="{!$Label.MonthlySubscriptionLabel}"/>
        <apex:variable var="afterPeriodEnds" value="{!$Label.AfterPromotionPeriod}"/>
        <apex:variable var="discountLabelVar" value="{!$Label.DiscountLabel}"/>
        <!--<tr style="{!IF(objWrapper[0].PromoDiscount == NULL, 'display:none;', '')}">
            <td colspan="2" style="border-bottom: 1px solid #ddd;font-size: 14px;">
                 <apex:outputPanel rendered="{!IF(objWrapper[0].PromoDiscount == NULL || objWrapper[0].PromoDiscount == '', false, true)}">
                    <p style="margin-top: 0pt;margin-bottom: 0pt;">                       
                        {!$Label.PromotionAppliedLabel}:                       
                    </p>
                    <p style="color: rgb(0, 0, 0);line-height: 1.2; margin-top: 0pt; margin-bottom: 0pt;">                                    
                        {!IF(isPromoTranslated == TRUE && objWrapper[0].languagePromoDetails != NULL, objWrapper[0].languagePromoDetails, objWrapper[0].promoDetails)}
                    </p>
                </apex:outputPanel>
            </td>
         </tr> CRM 9102-->
         <br/>
        <tr style="{!objWrapper[0].smOrLHBrandingClass}">
            <th colspan="2" align="left" style="text-transform: uppercase;border-bottom: 1px solid #ddd; width:700px;">{!tableHeader}</th>
        </tr>
        <apex:outputText value="{!objWrapper[0].productsHTML}" escape="false"></apex:outputText>
        <tr>
            <td style="border-bottom: 1px solid #ddd;">&nbsp;&nbsp;</td>
            <td style="border-bottom: 1px solid #ddd;">&nbsp;&nbsp;</td>
        </tr>
        <tr style="background-color: #ebedf0;">
            <td style="border-bottom: 1px solid #ddd;font-size: 14px;">                
				{!$Label.MonthlySubscriptionLabel}
            </td>
            <td align="right" style="border-bottom: 1px solid #ddd;font-size: 14px;">                
                <apex:outputPanel rendered="{!IF(CONTAINS(lmProdSelection,'LHF') || CONTAINS(lmProdSelection,'LHB'), true, false)}">                    
                    {!objWrapper[0].isoCode}&nbsp;
                    <apex:outputText value="{0, number, ###,###,###,###,##0.00}">
                        <apex:param value="{!IF(objWrapper[0].PromoDiscount == NULL && objWrapper[0].PromoDiscount == '' && objWrapper[0].SalesDiscount == 0 && objWrapper[0].SetupDiscount == 0, objWrapper[0].TotSalePriceDiscounted, objWrapper[0].TotSalePriceRetail)}"/> 
                    </apex:outputText>                    
                    + {!objWrapper[0].TBVPercent}% {!$Label.totalBookingValue}
                </apex:outputPanel>
                <apex:outputPanel rendered="{!IF(NOT(CONTAINS(lmProdSelection,'LHF')) && NOT(CONTAINS(lmProdSelection,'LHB')), true, false)}">                    
                    {!objWrapper[0].isoCode}&nbsp;
                    <apex:outputText value="{0, number, ###,###,###,###,##0.00}">
                        <apex:param value="{!IF(objWrapper[0].PromoDiscount == NULL && objWrapper[0].PromoDiscount == '' && objWrapper[0].SalesDiscount == 0 && objWrapper[0].SetupDiscount == 0, objWrapper[0].TotSalePriceDiscounted, objWrapper[0].TotSalePriceRetail)}"/> 
                    </apex:outputText>                    
                    <!--<apex:outputText value=" +GST" rendered="{!IF(objWrapper[0].isoCode == 'AUD', true, false)}" />-->
                </apex:outputPanel>                
            </td>
        </tr>
        <tr style="background-color: #ebedf0;">
            <td style="border-bottom: 1px solid #ddd;font-size: 14px;">                
                {!$label.SetupFeeLabel}                
            </td>
            <td align="right" style="border-bottom: 1px solid #ddd;font-size: 14px;">                
                {!objWrapper[0].isoCode}&nbsp;
                <apex:outputText value="{0, number, ###,###,###,###,##0.00}">
                    <apex:param value="{!IF(objWrapper[0].PromoDiscount == NULL && objWrapper[0].PromoDiscount == '' && objWrapper[0].SalesDiscount == 0 && objWrapper[0].SetupDiscount == 0, objWrapper[0].TotSetupPriceDiscounted, objWrapper[0].TotSetupPriceRetail)}"/> 
                </apex:outputText>                                    
                <!--<apex:outputText value=" +GST" rendered="{!IF(objWrapper[0].isoCode == 'AUD' && NOT(CONTAINS(lmProdSelection,'LHF')) && NOT(CONTAINS(lmProdSelection,'LHB')), true, false)}" />-->
            </td>
        </tr>
        
        <!-- Start Promo Applied Section -->
        <!--<apex:outputPanel rendered="{!IF(objWrapper[0].PromoDiscount == NULL || objWrapper[0].PromoDiscount == '', false, true)}">
            
            <tr>
                <td colspan="2" style="border-bottom: 1px solid #ddd;">
                    <p style="font-family: Arial;font-size: 9pt;margin-top: 0pt;margin-bottom: 0pt;">                       
                        {!$Label.PromotionAppliedLabel}:                       
                    </p>
                    <p style="color: rgb(0, 0, 0); font-family: arial; font-size: 9pt; line-height: 1.2; margin-top: 0pt; margin-bottom: 0pt;">                                    
                        {!IF(isPromoTranslated == TRUE && objWrapper[0].languagePromoDetails != NULL, objWrapper[0].languagePromoDetails, objWrapper[0].promoDetails)}
                    </p>
                </td>
            </tr>                   
        </apex:outputPanel>-->
        <tr style="{!IF(objWrapper[0].SalesDiscount > 0, '', 'display:none;')}">
            <td style="border-bottom: 1px solid #ddd;font-size: 14px;">
                <apex:outputPanel rendered="{!IF(objWrapper[0].SalesDiscount > 0, true, false)}">
                    {!$Label.SubscriptionDiscountLabel}
                </apex:outputPanel>                        
            </td>
            <td align="right" style="border-bottom: 1px solid #ddd;font-size: 14px;">
                <apex:outputPanel rendered="{!IF(objWrapper[0].SalesDiscount > 0, true, false)}">
                    <apex:outputText value="{0, number, ###,###,###,###,##0.0}">
                        <apex:param value="{!objWrapper[0].SalesDiscount}"/>
                    </apex:outputText>%
                </apex:outputPanel>
            </td>
        </tr>
        <tr style="{!IF(objWrapper[0].SetupDiscount > 0, '', 'display: none;')}">   
            <td style="border-bottom: 1px solid #ddd;font-size: 14px;">
                <apex:outputPanel rendered="{!IF(objWrapper[0].SetupDiscount > 0, true, false)}">
                    {!$Label.SetupFeeDiscountLabel}
                </apex:outputPanel>
            </td>
            <td align="right" style="border-bottom: 1px solid #ddd;font-size: 14px;">
                <apex:outputPanel rendered="{!IF(objWrapper[0].SetupDiscount > 0, true, false)}">
                    <apex:outputText value="{0, number, ###,###,###,###,##0.0}">
                        <apex:param value="{!objWrapper[0].SetupDiscount}"/>
                    </apex:outputText>%
                </apex:outputPanel>
            </td>
        </tr>

        <!--CRM 9102 start-->
        <tr style="{!IF(objWrapper[0].PromoDiscount == NULL, 'display:none;', '')}">
            <td colspan="2" style="border-bottom: 1px solid #ddd;font-size: 14px;">
                 <apex:outputPanel rendered="{!IF(objWrapper[0].PromoDiscount == NULL || objWrapper[0].PromoDiscount == '', false, true)}">
                    <p style="margin-top: 0pt;margin-bottom: 0pt;">                       
                        {!$Label.PromotionAppliedLabel}:                       
                    </p>
                    <p style="color: rgb(0, 0, 0);line-height: 1.2; margin-top: 0pt; margin-bottom: 0pt;">                                    
                        {!IF(isPromoTranslated == TRUE && objWrapper[0].languagePromoDetails != NULL, objWrapper[0].languagePromoDetails, objWrapper[0].promoDetails)}
                    </p>
                </apex:outputPanel>
            </td>
        </tr> 
        <!--CRM 9102 end-->
        <!--CRM 11446 start-->
        <apex:outputPanel rendered="{!NOT(ISNULL(objWrapper[0].SmartPlatformIncentive))}">
           
            <tr>
                <td colspan="2" style="border-bottom: 1px solid #ddd;">&nbsp;&nbsp;</td>
            </tr>
            <tr style="{!objWrapper[0].smOrLHBrandingClass}">
                <th colspan="2" align="left" style="text-transform: uppercase;border-bottom: 1px solid #ddd; width:700px;">{!$Label.Incentive}</th>
            </tr>
            <tr>
                <td style="font-size: 14px; font-weight: bold; border-bottom: 1px solid #ddd;">
                    {!$Label.Smart_Platform_Incentive}:
                </td>
                <td align="right" style="font-size: 14px; border-bottom: 1px solid #ddd;">
                    <apex:outputPanel rendered="{!IF(objWrapper[0].IncentiveAmount == NULL || objWrapper[0].SmartPlatformIncentive == '', false, true)}">
                        {!objWrapper[0].isoCode} {!objWrapper[0].IncentiveAmount}
                    </apex:outputPanel>
                </td>
            </tr>

            <tr>
                <td style="font-size: 14px; border-bottom: 1px solid #ddd;">
                    <apex:outputPanel rendered="{!IF(objWrapper[0].SmartPlatformIncentive == NULL || objWrapper[0].SmartPlatformIncentive == '', false, true)}" layout="none">
                        {!IF(isPromoTranslated == TRUE && objWrapper[0].languagePromoDetails != NULL, 
                            objWrapper[0].languagePromoDetails, 
                            objWrapper[0].promoDetails)}
                    </apex:outputPanel>
                </td>
                <td align="right" style="font-size: 14px; border-bottom: 1px solid #ddd; white-space: nowrap;">
                    <apex:outputPanel rendered="{!NOT(ISNULL(objWrapper[0].MonthlyIncentive))}" layout="none">
                        {!objWrapper[0].isoCode} {!objWrapper[0].MonthlyIncentive}{!$Label.month}
                    </apex:outputPanel>
                </td>


            </tr>
            
        </apex:outputPanel>
        <!--CRM 11446 end-->
        
        <!-- END Sales & Setup Discount % -->
        <tr style="{!IF((objWrapper[0].PromoDiscount != NULL && (objWrapper[0].SalesDiscount > 0 || objWrapper[0].SetupDiscount > 0)) || (objWrapper[0].PromoDiscount != NULL && (objWrapper[0].SalesDiscount == 0 || objWrapper[0].SetupDiscount == 0)) || (objWrapper[0].PromoDiscount == NULL && (objWrapper[0].SalesDiscount > 0 || objWrapper[0].SetupDiscount > 0)), '', 'display: none;')}">
        	<td style="border-bottom: 1px solid #ddd;">&nbsp;&nbsp;</td>
            <td style="border-bottom: 1px solid #ddd;">&nbsp;&nbsp;</td>
        </tr>
        <tr style="{!IF((objWrapper[0].PromoDiscount != NULL && objWrapper[0].SalesDiscount > 0) || (objWrapper[0].PromoDiscount != NULL && objWrapper[0].SalesDiscount == 0) || (objWrapper[0].PromoDiscount == NULL && objWrapper[0].SalesDiscount > 0), '', 'display:none;')}background-color: #CDCDCD;">
        	<td style="border-bottom: 1px solid #ddd;font-size: 14px;">
                <apex:outputPanel rendered="{!IF((objWrapper[0].PromoDiscount != NULL && objWrapper[0].SalesDiscount > 0) || (objWrapper[0].PromoDiscount != NULL && objWrapper[0].SalesDiscount == 0) || (objWrapper[0].PromoDiscount == NULL && objWrapper[0].SalesDiscount > 0), true, false)}">
                	{!IF(objWrapper[0].PromoDiscount != '',monthlySub + ' ('+afterPeriodEnds+')', monthlySub +' ('+discountLabelVar+')')}
                </apex:outputPanel>
            </td>
            <td align="right" style="border-bottom: 1px solid #ddd;font-size: 14px;">
				<apex:outputPanel rendered="{!IF((objWrapper[0].PromoDiscount != NULL && objWrapper[0].SalesDiscount > 0) || (objWrapper[0].PromoDiscount != NULL && objWrapper[0].SalesDiscount == 0) || (objWrapper[0].PromoDiscount == NULL && objWrapper[0].SalesDiscount > 0), true, false)}">                
                    <apex:outputPanel rendered="{!IF(CONTAINS(lmProdSelection,'LHF') || CONTAINS(lmProdSelection,'LHB'), true, false)}">                            
                        {!objWrapper[0].isoCode}&nbsp;
                        <apex:outputText value="{0, number, ###,###,###,###,##0.00}">
                            <apex:param value="{!objWrapper[0].TotSalePriceDiscounted}"/>
                        </apex:outputText>                            
                        &nbsp;+{!objWrapper[0].TBVPercent}% {!$Label.totalBookingValue}
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!IF(NOT(CONTAINS(lmProdSelection,'LHF')) && NOT(CONTAINS(lmProdSelection,'LHB')), true, false)}">                            
                        {!objWrapper[0].isoCode}&nbsp;
                        <apex:outputText value="{0, number, ###,###,###,###,##0.00}">
                            <apex:param value="{!objWrapper[0].TotSalePriceDiscounted}"/>
                        </apex:outputText>                            
                        <!--<apex:outputText value=" +GST" rendered="{!IF(objWrapper[0].isoCode == 'AUD', true, false)}" />-->                        
                    </apex:outputPanel>
                </apex:outputPanel>
            </td>
        </tr>
        
        <tr style="{!IF(objWrapper[0].SetupDiscount > 0, '', 'display: none;')}background-color: #CDCDCD;">
        	<td style="border-bottom: 1px solid #ddd;font-size: 14px;">
                <apex:outputPanel rendered="{!IF(objWrapper[0].SetupDiscount > 0, true, false)}">
                	{!$label.SetupFeeLabel} &nbsp;({!$Label.DiscountLabel})
                </apex:outputPanel>
            </td>
            <td align="right" style="border-bottom: 1px solid #ddd;font-size: 14px;">
                <apex:outputPanel rendered="{!IF(objWrapper[0].SetupDiscount > 0, true, false)}">
                    {!objWrapper[0].isoCode}&nbsp;
                    <apex:outputText value="{0, number, ###,###,###,###,##0.00}">
                        <apex:param value="{!objWrapper[0].TotSetupPriceDiscounted}"/>
                    </apex:outputText>                                            
                    <!--<apex:outputText value=" +GST" rendered="{!IF(objWrapper[0].isoCode == 'AUD' && NOT(CONTAINS(lmProdSelection,'LHF')) && NOT(CONTAINS(lmProdSelection,'LHB')), true, false)}" />-->
                </apex:outputPanel>
            </td>
        </tr>
        <!-- Start After Discount 
        <apex:outputPanel rendered="{!IF((objWrapper[0].PromoDiscount != NULL && (objWrapper[0].SalesDiscount > 0 || objWrapper[0].SetupDiscount > 0)) || (objWrapper[0].PromoDiscount != NULL && (objWrapper[0].SalesDiscount == 0 || objWrapper[0].SetupDiscount == 0)) || (objWrapper[0].PromoDiscount == NULL && (objWrapper[0].SalesDiscount > 0 || objWrapper[0].SetupDiscount > 0)), true, false)}">
            <tr>
                <td style="border-bottom: 1px solid #ddd;">&nbsp;&nbsp;</td>
                <td style="border-bottom: 1px solid #ddd;">&nbsp;&nbsp;</td>
            </tr>
            <apex:outputPanel rendered="{!IF((objWrapper[0].PromoDiscount != NULL && objWrapper[0].SalesDiscount > 0) || (objWrapper[0].PromoDiscount != NULL && objWrapper[0].SalesDiscount == 0) || (objWrapper[0].PromoDiscount == NULL && objWrapper[0].SalesDiscount > 0), true, false)}">
                <tr style="background-color: #bbbb;">
                    <td style="border-bottom: 1px solid #ddd;">                        
                        {!IF(objWrapper[0].PromoDiscount != '',monthlySub + ' ('+afterPeriodEnds+')', monthlySub +' ('+discountLabelVar+')')}                                                
                    </td>
                    <td align="right" style="border-bottom: 1px solid #ddd;">                
                        <apex:outputPanel rendered="{!IF(CONTAINS(lmProdSelection,'LHF') || CONTAINS(lmProdSelection,'LHB'), true, false)}">                            
                            {!objWrapper[0].isoCode}&nbsp;
                            <apex:outputText value="{0, number, ###,###,###,###,##0.00}">
                                <apex:param value="{!objWrapper[0].TotSalePriceDiscounted}"/>
                            </apex:outputText>                            
                            &nbsp;+{!objWrapper[0].TBVPercent}% {!$Label.totalBookingValue}
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!IF(NOT(CONTAINS(lmProdSelection,'LHF')) && NOT(CONTAINS(lmProdSelection,'LHB')), true, false)}">                            
                            {!objWrapper[0].isoCode}&nbsp;
                            <apex:outputText value="{0, number, ###,###,###,###,##0.00}">
                                <apex:param value="{!objWrapper[0].TotSalePriceDiscounted}"/>
                            </apex:outputText>                            
                            <apex:outputText value=" +GST" rendered="{!IF(objWrapper[0].isoCode == 'AUD', true, false)}" />                        
                        </apex:outputPanel>                
                    </td>
                </tr>
            </apex:outputPanel>
            <apex:outputPanel rendered="{!IF((objWrapper[0].PromoDiscount == NULL || objWrapper[0].PromoDiscount == '') && objWrapper[0].SetupDiscount > 0, true, false)}">
                <tr style="background-color: #bbbb;">
                    <td style="border-bottom: 1px solid #ddd;">
                        {!$label.SetupFeeLabel} &nbsp;({!$Label.DiscountLabel})
                    </td>
                    <td align="right" style="border-bottom: 1px solid #ddd;">                        
                        {!objWrapper[0].isoCode}&nbsp;
                        <apex:outputText value="{0, number, ###,###,###,###,##0.00}">
                            <apex:param value="{!objWrapper[0].TotSetupPriceDiscounted}"/>
                        </apex:outputText>                                            
                        <apex:outputText value=" +GST" rendered="{!IF(objWrapper[0].isoCode == 'AUD' && NOT(CONTAINS(lmProdSelection,'LHF')) && NOT(CONTAINS(lmProdSelection,'LHB')), true, false)}" />
                    </td>
                </tr>   
            </apex:outputPanel>
        </apex:outputPanel>                
         END After Discount -->
    </table>    
</apex:component>
